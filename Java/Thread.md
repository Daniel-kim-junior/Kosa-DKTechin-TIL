# Thread

- Thread는 왜 필요한가? 멀티 코어 아키텍처로 하드웨어의 진화에 따라
하드웨어를 100%로 활용할 수 없어졌다. 이를 위해 응답성과 성능을 더 높이기 위해

1. 응답성
    - 여러 요청을 병렬적으로 처리 가능한 장점
    - 구현 예) Apache Tomcat, jetty 등의 서블릿 컨테이너들
    
2. 응답성
    - 하나의 코어로도 멀티 태스킹이 일어나고 있는 착각을 구현할 수 있음
    - 그러나 진정한 의미의 병렬성은 아님 (Contect Switching이 일어나기 때문)
    - 따라서 하드웨어의 개수를 줄일 수 있고 비용 절감의 이점을 가짐

## Process Architecture

    - 메모리에 올라간 프로세스 즉 사용자가 작성한 프로그램은
    다른 프로세스들과는 격리되어 있음

    PID - 어플리케이션이 읽고 쓰기 위해 여는 파일

    Code - CPU가 연산해야하는 부분

    Heap - Appication Data

    Thread - Stack과 Instruction Point

    ** Thread는 각각의 Stack과 Instruction Pointer를 격리된 환경에서 가지고 있음
    나머지는 모두 공유한다.(File, Heap, Code)


## Thread의 경쟁
    
    ```
    일반적으로 코어보다 Process가훨씬 많고 각각의 프로세스는 하나 이상의 스레드를 
    가진다.
    ```

### Context Switching
  
    - 쓰레드 하나를 계산했다가 다른 쓰레드로 계산을 이관하는 이 순간을 컨텍스트 스위치라고
  한다.

  - 동시에 많은 쓰레드를 다룰 때 효율성이 떨어지는 원인이 된다.

  너무 많은 스레드를 가동하게 되면 이 컨텍스트 스위칭 관리가 일을 처리하는
  것보다 더 커지는 '스레싱'이 일어나게 된다.

  프로세스가 리소스를 더 적게 사용하는 이유는 앞서 공부한 다른 스레드와
  공유하는 부분이 많기 때문인데

  추측하기론 캐싱되는 데이터 때문에  다른 프로세스의 스레드와 컨텍스트 스위칭 되는 것보다
  같은 프로세스 내의 스레드와 컨텍스트 스위칭 되는것이 더 효율적이라고 할 수 있을 것 같다.



