# 영속성 전이: CASCADE

- 특정 엔티티를 영속 상태로 만들 때 연관된 엔티티도 함께 영속 상태로 만들고 싶을 때

예: 부모 엔티티를 저장할 때 자식 엔티티도 함께 저장

- 영속성 전이는 연관관계를 매핑하는 것과 아무 관련이 없음

- 엔티티를 영속화할 때 연관된 엔티티도 함께 영속화하는 편리함을 제공할 뿐

### CASCADE 종류

- ALL: 모두 적용
- PERSIST: 영속 (저장할 때만)

### 써야할 때

- 한 부모에 완전히 종속적일 때
  (라이프 사이클이 항상 같이 갈때 && 단일 소유자일 때)

# 고아 객체

- 고아 객체 제거: 부모 엔티티와 연관관계가 끊어진 자식 엔티티를 자동으로 삭제

- orphanRemoval = true

- Parent parent1 = em.find(Parent.class, id);
  parent1.getChildren().remove(0);
  // 자식 엔티티를 컬렉션에서 제거

- DELETE FROM CHILD WHERE ID = ?
